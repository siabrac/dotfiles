#!/bin/zsh

# location of dotfiles
DOTDIR=~/dotfiles

# dispatch subcommands
case "$1" in
  restow)
    shift
    for pkg in "$@"; do
      stow -d "$DOTDIR" -R "$pkg" && echo "Restowed $pkg"
    done
    ;;
  bundle)
    antidote bundle < ~/.config/zsh/.zsh_plugins.txt > ~/.config/zsh/.zsh_plugins.zsh
    echo "Plugins bundled"
    ;;
  list)
    echo "dotfile packages:"
    find "$DOTDIR" -mindepth 1 -maxdepth 1 -type d \
      ! -name ".git" \
      ! -name "bin" \
      ! -name ".github" \
      -exec basename {} \;
    ;;
  push)
    git -C "$DOTDIR" add .
    git -C "$DOTDIR" commit -m "updated dotfiles"
    git -C "$DOTDIR" push && echo "dotfiles pushed"
    ;;
esac

